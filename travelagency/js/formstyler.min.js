!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e($||require("jquery")):e(jQuery)}((function(e){"use strict";var t="styler",s={idSuffix:"-styler",filePlaceholder:"",fileBrowse:"",fileNumber:"",selectPlaceholder:"",selectSearch:!1,selectSearchLimit:10,selectSearchNotFound:"РЎРѕРІРїР°РґРµРЅРёР№ РЅРµ РЅР°Р№РґРµРЅРѕ",selectSearchPlaceholder:"РџРѕРёСЃРє...",selectVisibleOptions:0,selectSmartPositioning:!0,locale:"ru",locales:{en:{filePlaceholder:"No file selected",fileBrowse:"Browse...",fileNumber:"Selected files: %s",selectPlaceholder:"Select...",selectSearchNotFound:"No matches found",selectSearchPlaceholder:"Search..."}},onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};function l(t,l){this.element=t,this.options=e.extend({},s,l);var i=this.options.locale;void 0!==this.options.locales[i]&&e.extend(this.options,this.options.locales[i]),this.init()}function i(s){var l,i,o;!e(s.target).parents().hasClass("jq-selectbox")&&"OPTION"!=s.target.nodeName&&e("div.jq-selectbox.opened").length&&(l=e("div.jq-selectbox.opened"),i=e("div.jq-selectbox__search input",l),o=e("div.jq-selectbox__dropdown",l),l.find("select").data("_"+t).options.onSelectClosed.call(l),i.length&&i.val("").keyup(),o.hide().find("li.sel").addClass("selected"),l.removeClass("focused opened dropup dropdown"))}l.prototype={init:function(){var t,s,l,o,a,d=e(this.element),c=this.options,r=!(!navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||navigator.userAgent.match(/(Windows\sPhone)/i)),n=!(!navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/(Windows\sPhone)/i));function h(){void 0!==d.attr("id")&&""!==d.attr("id")&&(this.id=d.attr("id")+c.idSuffix),this.title=d.attr("title"),this.classes=d.attr("class"),this.data=d.data()}d.is(":checkbox")?((t=function(){var t=new h,s=e('<div class="jq-checkbox"><div class="jq-checkbox__div"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);d.after(s).prependTo(s),d.is(":checked")&&s.addClass("checked").closest(".checkbox").addClass("checked"),d.is(":disabled")&&s.addClass("disabled").closest(".checkbox").addClass("disabled"),s.click((function(e){e.preventDefault(),d.triggerHandler("click"),s.is(".disabled")||(d.is(":checked")?(d.prop("checked",!1),s.removeClass("checked").closest(".checkbox").removeClass("checked")):(d.prop("checked",!0),s.addClass("checked").closest(".checkbox").addClass("checked")),d.focus().change())})),d.closest("label").add('label[for="'+d.attr("id")+'"]').on("click.styler",(function(t){e(t.target).is("a")||e(t.target).closest(s).length||(s.triggerHandler("click"),t.preventDefault())})),d.on("change.styler",(function(){d.is(":checked")?s.addClass("checked").closest(".checkbox").addClass("checked"):s.removeClass("checked").closest(".checkbox").removeClass("checked")})).on("keydown.styler",(function(e){32==e.which&&s.click()})).on("focus.styler",(function(){s.is(".disabled")||s.addClass("focused").closest(".checkbox").addClass("focused")})).on("blur.styler",(function(){s.removeClass("focused").closest(".checkbox").removeClass("focused")}))})(),d.on("refresh",(function(){d.closest("label").add('label[for="'+d.attr("id")+'"]').off(".styler"),d.off(".styler").parent().before(d).remove(),t()}))):d.is(":radio")?((s=function(){var t=new h,s=e('<div class="jq-radio"><div class="jq-radio__div"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);d.after(s).prependTo(s),d.is(":checked")&&s.addClass("checked").closest(".radio").addClass("checked"),d.is(":disabled")&&s.addClass("disabled").closest(".radio").addClass("disabled"),e.fn.commonParents=function(){var t=this;return t.first().parents().filter((function(){return e(this).find(t).length===t.length}))},e.fn.commonParent=function(){return e(this).commonParents().first()},s.click((function(t){var l;t.preventDefault(),d.triggerHandler("click"),s.is(".disabled")||((l=e('input[name="'+d.attr("name")+'"]')).commonParent().find(l).prop("checked",!1).parent().removeClass("checked").closest(".radio").removeClass("checked"),d.prop("checked",!0).parent().addClass("checked").closest(".radio").addClass("checked"),d.focus().change())})),d.closest("label").add('label[for="'+d.attr("id")+'"]').on("click.styler",(function(t){e(t.target).is("a")||e(t.target).closest(s).length||(s.triggerHandler("click"),t.preventDefault())})),d.on("change.styler",(function(){d.parent().addClass("checked")})).on("focus.styler",(function(){s.is(".disabled")||s.addClass("focused").closest(".radio").addClass("focused")})).on("blur.styler",(function(){s.removeClass("focused").closest(".radio").removeClass("focused")}))})(),d.on("refresh",(function(){d.closest("label").add('label[for="'+d.attr("id")+'"]').off(".styler"),d.off(".styler").parent().before(d).remove(),s()}))):d.is(":file")?((l=function(){var t=new h,s=d.data("placeholder");void 0===s&&(s=c.filePlaceholder);var l=d.data("browse");void 0!==l&&""!==l||(l=c.fileBrowse);var i=e('<div class="jq-file"><div class="jq-file__name"><span class="jq-file__fix"><span>'+s+'</span></span></div><div class="jq-file__browse">'+l+"</div></div>").attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);d.after(i).appendTo(i),d.is(":disabled")&&i.addClass("disabled");var o=d.val(),a=e(".jq-file__fix span",i);o&&a.text(o.replace(/.+[\\\/]/,"")),d.on("change.styler",(function(){var e,t,l=d.val();d.is("[multiple]")&&(l="",0<(e=d[0].files.length)&&(void 0===(t=d.data("number"))&&(t=c.fileNumber),l=t=t.replace("%s",e))),a.text(l.replace(/.+[\\\/]/,"")),""===l?(a.text(s),i.removeClass("changed")):i.addClass("changed")})).on("focus.styler",(function(){i.addClass("focused")})).on("blur.styler",(function(){i.removeClass("focused")})).on("click.styler",(function(){i.removeClass("focused")}))})(),d.on("refresh",(function(){d.off(".styler").parent().before(d).remove(),l()}))):d.is('input[type="number"]')?((o=function(){var t=new h,s=e('<div class="jq-number"><div class="jq-number__spin minus"></div><div class="jq-number__spin plus"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);d.after(s).prependTo(s).wrap('<div class="jq-number__field"></div>'),d.is(":disabled")&&s.addClass("disabled");var l,i,o,a=null,c=null;function r(t){var s,a=d.val();e.isNumeric(a)||(a=0,d.val("0")),t.is(".minus")?s=Number(a)-o:t.is(".plus")&&(s=Number(a)+o);var c=(o.toString().split(".")[1]||[]).length;if(0<c){for(var r="1";r.length<=c;)r+="0";s=Math.round(s*r)/r}e.isNumeric(l)&&e.isNumeric(i)?l<=s&&s<=i&&d.val(s):e.isNumeric(l)&&!e.isNumeric(i)?l<=s&&d.val(s):(e.isNumeric(l)||!e.isNumeric(i)||s<=i)&&d.val(s)}void 0!==d.attr("min")&&(l=d.attr("min")),void 0!==d.attr("max")&&(i=d.attr("max")),o=void 0!==d.attr("step")&&e.isNumeric(d.attr("step"))?Number(d.attr("step")):Number(1),s.is(".disabled")||(s.on("mousedown","div.jq-number__spin",(function(){var t=e(this);r(t),a=setTimeout((function(){c=setInterval((function(){r(t)}),40)}),350)})).on("mouseup mouseout","div.jq-number__spin",(function(){clearTimeout(a),clearInterval(c)})).on("mouseup","div.jq-number__spin",(function(){d.change().trigger("input")})),d.on("focus.styler",(function(){s.addClass("focused")})).on("blur.styler",(function(){s.removeClass("focused")})))})(),d.on("refresh",(function(){d.off(".styler").closest(".jq-number").before(d).remove(),o()}))):d.is("select")?((a=function(){function t(e){var t=e.prop("scrollHeight")-e.outerHeight(),s=null,l=null;e.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",(function(i){s=i.originalEvent.detail<0||0<i.originalEvent.wheelDelta?1:-1,((l=e.scrollTop())>=t&&s<0||l<=0&&0<s)&&(i.stopPropagation(),i.preventDefault())}))}var s=e("option",d),l="";function o(){for(var e=0;e<s.length;e++){var t=s.eq(e),i="",o="",a="",d="",r="",n="",h="",f="",u="";t.prop("selected")&&(o="selected sel"),t.is(":disabled")&&(o="disabled"),t.is(":selected:disabled")&&(o="selected sel disabled"),void 0!==t.attr("id")&&""!==t.attr("id")&&(d=' id="'+t.attr("id")+c.idSuffix+'"'),void 0!==t.attr("title")&&""!==s.attr("title")&&(r=' title="'+t.attr("title")+'"'),void 0!==t.attr("class")&&(h=" "+t.attr("class"),u=' data-jqfs-class="'+t.attr("class")+'"');var p=t.data();for(var v in p)""!==p[v]&&(n+=" data-"+v+'="'+p[v]+'"');o+h!==""&&(a=' class="'+o+h+'"'),i="<li"+u+n+a+r+d+"><span>"+t.html()+"</span></li>",t.parent().is("optgroup")&&(void 0!==t.parent().attr("class")&&(f=" "+t.parent().attr("class")),i="<li"+u+n+' class="'+o+h+" option"+f+'"'+r+d+"><span>"+t.html()+"</span></li>",t.is(":first-child")&&(i='<li class="optgroup'+f+'"<span>>'+t.parent().attr("label")+"</span></li>"+i)),l+=i}}if(d.is("[multiple]")){if(n||r)return;!function(){var i=new h,a=e('<div class="jq-select-multiple jqselect"></div>').attr({id:i.id,title:i.title}).addClass(i.classes).data(i.data);d.after(a),o(),a.append("<ul>"+l+"</ul>");var c=e("ul",a),r=e("li",a),n=d.attr("size"),f=c.outerHeight(),u=r.outerHeight();void 0!==n&&0<n?c.css({height:u*n}):c.css({height:4*u}),f>a.height()&&(c.css("overflowY","scroll"),t(c),r.filter(".selected").length&&c.scrollTop(c.scrollTop()+r.filter(".selected").position().top)),d.prependTo(a),d.is(":disabled")?(a.addClass("disabled"),s.each((function(){e(this).is(":selected")&&r.eq(e(this).index()).addClass("selected")}))):(r.filter(":not(.disabled):not(.optgroup)").click((function(t){d.focus();var l,i,o=e(this);t.ctrlKey||t.metaKey||o.addClass("selected"),t.shiftKey||o.addClass("first"),t.ctrlKey||t.metaKey||t.shiftKey||o.siblings().removeClass("selected first"),(t.ctrlKey||t.metaKey)&&(o.is(".selected")?o.removeClass("selected first"):o.addClass("selected first"),o.siblings().removeClass("first")),t.shiftKey&&(i=l=!1,o.siblings().removeClass("selected").siblings(".first").addClass("selected"),o.prevAll().each((function(){e(this).is(".first")&&(l=!0)})),o.nextAll().each((function(){e(this).is(".first")&&(i=!0)})),l&&o.prevAll().each((function(){return!e(this).is(".selected")&&void e(this).not(".disabled, .optgroup").addClass("selected")})),i&&o.nextAll().each((function(){return!e(this).is(".selected")&&void e(this).not(".disabled, .optgroup").addClass("selected")})),1==r.filter(".selected").length&&o.addClass("first")),s.prop("selected",!1),r.filter(".selected").each((function(){var t=e(this),l=t.index();t.is(".option")&&(l-=t.prevAll(".optgroup").length),s.eq(l).prop("selected",!0)})),d.change()})),s.each((function(t){e(this).data("optionIndex",t)})),d.on("change.styler",(function(){r.removeClass("selected");var t=[];s.filter(":selected").each((function(){t.push(e(this).data("optionIndex"))})),r.not(".optgroup").filter((function(s){return-1<e.inArray(s,t)})).addClass("selected")})).on("focus.styler",(function(){a.addClass("focused")})).on("blur.styler",(function(){a.removeClass("focused")})),f>a.height()&&d.on("keydown.styler",(function(e){38!=e.which&&37!=e.which&&33!=e.which||c.scrollTop(c.scrollTop()+r.filter(".selected").position().top-u),40!=e.which&&39!=e.which&&34!=e.which||c.scrollTop(c.scrollTop()+r.filter(".selected:last").position().top-c.innerHeight()+2*u)})))}()}else!function(){var a=new h,n="",f=d.data("placeholder"),u=d.data("search"),p=d.data("search-limit"),v=d.data("search-not-found"),m=d.data("search-placeholder"),g=d.data("smart-positioning");void 0===f&&(f=c.selectPlaceholder),void 0!==u&&""!==u||(u=c.selectSearch),void 0!==p&&""!==p||(p=c.selectSearchLimit),void 0!==v&&""!==v||(v=c.selectSearchNotFound),void 0===m&&(m=c.selectSearchPlaceholder),void 0!==g&&""!==g||(g=c.selectSmartPositioning);var b=e('<div class="jq-selectbox jqselect"><div class="jq-selectbox__select"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>').attr({id:a.id,title:a.title}).addClass(a.classes).data(a.data);d.after(b).prependTo(b);var C=0<(C=b.css("z-index"))?C:1,x=e("div.jq-selectbox__select",b),y=e("div.jq-selectbox__select-text",b),w=s.filter(":selected");o(),u&&(n='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+m+'"></div><div class="jq-selectbox__not-found">'+v+"</div>");var q=e('<div class="jq-selectbox__dropdown">'+n+"<ul class='js-select-scroll'>"+l+"</ul></div>");b.append(q);var k=e("ul",q),_=e("li",q),j=e("input",q),S=e("div.jq-selectbox__not-found",q).hide();_.length<p&&j.parent().hide(),""===s.first().text()&&s.first().is(":selected")&&!1!==f?y.text(f).addClass("placeholder"):y.text(w.text());var T,N,P=0,H=0;_.css({display:"inline-block"}),_.each((function(){var t=e(this);t.innerWidth()>P&&(P=t.innerWidth(),H=t.width())})),_.css({display:""}),y.is(".placeholder")&&y.width()>P?y.width(y.width()):(N=(T=b.clone().appendTo("body").width("auto")).outerWidth(),T.remove(),N==b.outerWidth()&&y.width(H)),P>b.width()&&q.width(P),""===s.first().text()&&""!==d.data("placeholder")&&_.first().hide();var A,D=b.outerHeight(!0),I=j.parent().outerHeight(!0)||0,K=k.css("max-height"),O=_.filter(".selected");O.length<1&&_.first().addClass("selected sel"),void 0===_.data("li-height")&&(A=_.outerHeight(),!1!==f&&(A=_.eq(1).outerHeight()),_.data("li-height",A));var M=q.css("top");if("auto"==q.css("left")&&q.css({left:0}),"auto"==q.css("top")&&(q.css({top:D}),M=D),q.hide(),O.length&&(s.first().text()!=w.text()&&b.addClass("changed"),b.data("jqfs-class",O.data("jqfs-class")),b.addClass(O.data("jqfs-class"))),d.is(":disabled"))return b.addClass("disabled");x.click((function(){var l,i,o,a,n,h,f,u;e("div.jq-selectbox").filter(".opened").length&&c.onSelectClosed.call(e("div.jq-selectbox").filter(".opened")),d.focus(),r||(l=e(window),i=_.data("li-height"),o=b.offset().top,a=l.height()-D-(o-l.scrollTop()),void 0!==(n=d.data("visible-options"))&&""!==n||(n=c.selectVisibleOptions),h=5*i,f=i*n,0<n&&n<6&&(h=f),0===n&&(f="auto"),u=function(){function e(){k.css("max-height",Math.floor((a-20-I)/i)*i)}q.height("auto").css({bottom:"auto",top:M}),e(),k.css("max-height",f),"none"!=K&&k.css("max-height",K),a<q.outerHeight()+20&&e()},!0===g||1===g?h+I+20<a?(u(),b.removeClass("dropup").addClass("dropdown")):(function(){function e(){k.css("max-height",Math.floor((o-l.scrollTop()-20-I)/i)*i)}q.height("auto").css({top:"auto",bottom:M}),e(),k.css("max-height",f),"none"!=K&&k.css("max-height",K),o-l.scrollTop()-20<q.outerHeight()+20&&e()}(),b.removeClass("dropdown").addClass("dropup")):!1===g||0===g?h+I+20<a&&(u(),b.removeClass("dropup").addClass("dropdown")):(q.height("auto").css({bottom:"auto",top:M}),k.css("max-height",f),"none"!=K&&k.css("max-height",K)),b.offset().left+q.outerWidth()>l.width()&&q.css({left:"auto",right:0}),e("div.jqselect").css({zIndex:C-1}).removeClass("opened"),b.css({zIndex:C}),q.is(":hidden")?(e("div.jq-selectbox__dropdown:visible").hide(),q.show(),b.addClass("opened focused"),c.onSelectOpened.call(b)):(q.hide(),b.removeClass("opened dropup dropdown"),e("div.jq-selectbox").filter(".opened").length&&c.onSelectClosed.call(b)),j.length&&(j.val("").keyup(),S.hide(),j.keyup((function(){var t=e(this).val();_.each((function(){e(this).html().match(new RegExp(".*?"+t+".*?","i"))?e(this).show():e(this).hide()})),""===s.first().text()&&""!==d.data("placeholder")&&_.first().hide(),_.filter(":visible").length<1?S.show():S.hide()}))),_.filter(".selected").length&&(""===d.val()?k.scrollTop(0):(k.innerHeight()/i%2!=0&&(i/=2),k.scrollTop(k.scrollTop()+_.filter(".selected").position().top-k.innerHeight()/2+i))),t(k))})),_.hover((function(){e(this).siblings().removeClass("selected")})),_.filter(".selected").text(),_.filter(":not(.disabled):not(.optgroup)").click((function(){d.focus();var t,l=e(this),i=l.text();l.is(".selected")||(t=l.index(),t-=l.prevAll(".optgroup").length,l.addClass("selected sel").siblings().removeClass("selected sel"),s.prop("selected",!1).eq(t).prop("selected",!0),y.text(i),b.data("jqfs-class")&&b.removeClass(b.data("jqfs-class")),b.data("jqfs-class",l.data("jqfs-class")),b.addClass(l.data("jqfs-class")),d.change()),q.hide(),b.removeClass("opened dropup dropdown"),c.onSelectClosed.call(b)})),q.mouseout((function(){e("li.sel",q).addClass("selected")})),d.on("change.styler",(function(){y.text(s.filter(":selected").text()).removeClass("placeholder"),_.removeClass("selected sel").not(".optgroup").eq(d[0].selectedIndex).addClass("selected sel"),s.first().text()!=_.filter(".selected").text()?b.addClass("changed"):b.removeClass("changed")})).on("focus.styler",(function(){b.addClass("focused"),e("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()})).on("blur.styler",(function(){b.removeClass("focused")})).on("keydown.styler keyup.styler",(function(e){var t=_.data("li-height");""===d.val()?y.text(f).addClass("placeholder"):y.text(s.filter(":selected").text()),_.removeClass("selected sel").not(".optgroup").eq(d[0].selectedIndex).addClass("selected sel"),38!=e.which&&37!=e.which&&33!=e.which&&36!=e.which||(""===d.val()?k.scrollTop(0):k.scrollTop(k.scrollTop()+_.filter(".selected").position().top)),40!=e.which&&39!=e.which&&34!=e.which&&35!=e.which||k.scrollTop(k.scrollTop()+_.filter(".selected").position().top-k.innerHeight()+t),13==e.which&&(e.preventDefault(),q.hide(),b.removeClass("opened dropup dropdown"),c.onSelectClosed.call(b))})).on("keydown.styler",(function(e){32==e.which&&(e.preventDefault(),x.click())})),i.registered||(e(document).on("click",i),i.registered=!0)}()})(),d.on("refresh",(function(){d.off(".styler").parent().before(d).remove(),a()}))):d.is(":reset")&&d.on("click",(function(){setTimeout((function(){d.closest("form").find("input, select").trigger("refresh")}),1)}))},destroy:function(){var s=e(this.element);s.is(":checkbox")||s.is(":radio")?(s.removeData("_"+t).off(".styler refresh").removeAttr("style").parent().before(s).remove(),s.closest("label").add('label[for="'+s.attr("id")+'"]').off(".styler")):s.is('input[type="number"]')?s.removeData("_"+t).off(".styler refresh").closest(".jq-number").before(s).remove():(s.is(":file")||s.is("select"))&&s.removeData("_"+t).off(".styler refresh").removeAttr("style").parent().before(s).remove()}},e.fn[t]=function(s){var i,o=arguments;return void 0===s||"object"==typeof s?(this.each((function(){e.data(this,"_"+t)||e.data(this,"_"+t,new l(this,s))})).promise().done((function(){var s=e(this[0]).data("_"+t);s&&s.options.onFormStyled.call()})),this):"string"==typeof s&&"_"!==s[0]&&"init"!==s?(this.each((function(){var a=e.data(this,"_"+t);a instanceof l&&"function"==typeof a[s]&&(i=a[s].apply(a,Array.prototype.slice.call(o,1)))})),void 0!==i?i:this):void 0},i.registered=!1}));